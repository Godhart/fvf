# Описание тестового окружения

Тестовое окружение представляет собой описание иерархии объектов тестового окружения. Используемый язык описания - YAML

Один файл может содержать описания нескольких тестовых окружений, каждое из которых может быть выбрано для использования
при проверке посредством параметра при запуске.

Ввиду того, что, как будет показано ниже, описываемое тестовое окружение может быть параметризовано, а так же 
составляться по описаниям из нескольких файлов, информация о действующем при проверке описании может быть выведена
в текстовом виде, а так же в виде UML диаграммы (в формате описания PlantUML) для контроля.

## Базововое описание

Формат описания описания тестового окружения:
```yaml
test_env:   # Начало описания тестового окружения или окружений.
            # Содержимое - структра (она же словарь или хеш), если окружение одно, или список структур, если описываемых
            # окружений несколько
```

В структурах, описывающих тестовые окружения, содержатся поля, в которых находятся параметры тестового окружения и 
описание иерархии входящих в него объектов.

### Обязательные поля описания тестового окружения
```yaml
  fw: "1.0.0" # Требуемая версия фреймворка   -- TODO: --
  name: <test_env_name>  # Строка с наименованием тестового окружения, отображающего его суть, или с кратким описанием
```

### Опциональные поля описания тестового окружения
```yaml
  description: "<long test environment description goes here>" # Подробное описание тестового окружения
```

### Поля расширенного описания тестового окружения

Поля `generics`, `generate`, `alias`, `model`, `include`, `import`, `group`, `extension` используются для
 расширенного описания тестового окружения и описаны немного далее в разделе 
 [Расширенное описание](d3_4_test_environment.md#Расширенное-описание), т.к. требуют базового представления об 
 описании объектов тестового окружения.

Поле `platforms` содержит описание и иерархии объектов тестового окружения.

## Секция 'platforms'

Секция содержит описание иерархии объектов тестового окражуения и м.б. внутри корня тестового окружения,
внутри секций `generate` и `group` а так же внутри описания самого объекта тестового окружения при иерархическом
стиле описания.

### Формат описания иерархии объектов тестового окражуения

```yaml
  <entity_type_A>:  # Имя поля, указанное как <entity_type_A>, соответствует типу описываемых объектов
    # Содержимым должена быть структура с описанием параетров (generics) объекта, или список таких структур,
    # если требуется описать несколько объектов одного типа
    
    # При "плоском" стиле описания перечисляются все объекты указанного типа
    # При иерархическом - только объекты этого типа, находящиеся в верху иерархии
    - name: "<entity_1_name>"       # Строка с именем данного объекта чтобы отличать его от других. Наличие - ОБЯЗАТЕЛЬНО
                                    # Имя ДОЛЖНО быть уникальным в рамках всего тестового окружения    
      description: ""               # Опциональное поле для подробного описания объекта и его роли в свободной форме
      platform: "<entity_2_name>"   # Строка с именем объекта, который будет являться "родителем" для данного
                                    # Параметр опциональный, и не указывается при иерархическом стиле описания
                                    # При описании необходимо отслежиать циклические зависимости
                                    # В случае наличия циклической зависимости система остановит проверку на этапе 
                                    # загрузки тестового коружения
                                    # Если параметр не указан, и объекта не входит в по иерархии в другой, он на имеет родителя
                                    # Родитель нужен:
                                    # * для того, выполнять функции, требуемые этому объекту для реализации собственных
                                    #   - по умолчанию все запросы, если явно не указано, отправляются "родителю"
                                    # * для того, чтобы явным образом указать зависимость этого объекта от другого
                                    #   - запускается сперва родительский объект, останавливаются объекты в обратном порядке
                                    
      wait:                         # Список имён дополнтельных объектов, трубемых для работы описываемого.
        - "<entity_3_name>"         # Запуск описываемого объекта будет отложен до завершения перечисленных здесь объектов
        - "<entity_4_name>"         # Отсановка объектов осушествялеся в обратном порядке
                                    # В этом списке не должно быть объектов, запуск которых зависит от описываемого
                                    # В случае наличия циклической зависимости система остановит проверку на этапе 
                                    # загрузки тестового коружения
                                    # Параметр опциональный
                                    
      channels:                     # Список каналов сообщений, на которые должена быть подписан объект
        - "<channel_1_name>"        # -- TODO: --
        - "<channel_2_name>"
        
      condition: <condition>        # Условие использования объекта:
                                    # * 0 для исколючения объекта из тестового окружения
                                    # * 1 для включения объекта в тестовое окружение
                                    # Параметр опциональный, если не указан, объект вклчается
                                    # Использование данного параметра объекта обычно имеет смысл совместно с парамметрами 
                                    # тестового окружения (секция generics описания тестового окружения)
                                    # Пример такого использования приведён в разделе 'Экстраполяция значений в описании
                                    # тестового окружения'
                                    
      # Перечень параметров для конструктора объекта тестового окружения
      # Имя поля - имя аргумента в конструкторе, значение - соответственно значение которое он получит
      # Тип значения должен соотвествовать ожидаемому типу аргумента. 
      # Возможные типы аргументов: string, int, float, list, dict. 
      # Для аругментов типа bool указывать целое число 0 для False или 1 для True
      # Так же можно указывать аргументы других типов за счёт экстраполяции строкового выражения "$e{<Python expression>}"
      # Подробнее об экстраполяции аргументов см.раздел 'Экстраполяция значений в описании тестового окружения'
      <contructor_argument_1_name>: <contructor_argument_1_value>
      <contructor_argument_2_name>: <contructor_argument_2_value>
      # Значения аргуменов list и dict описываются по правилам YAML
      <contructor_argument_3_name>:   # list
        - <value_1>
        - <value_2>
      <contructor_argument_4_name>:   # dict
        <key_1>: <value_1>
        <key_2>: <value_2>
      ...
      
      # Следующее поле используется при иерархическом стиле опиания
      platforms:                    # В содержимом описываеются иерархия объектов тестового окружения, для которых этот будет родителем
                                    # Формат описания полностью аналогичен описанию иерархии в тестовом окружении
        <entity_type>: ...          
          - name: ...
          
    - name: "<entity_2_name>"       # Описние ещё одного объекта тестового окружения такого же типа при плоском стиле описания или если 
                                    # этот объект в верху иерархии
      ...

  # Описане объектов другого типа по тем же принципам
  <entity_type_B>:
     ...
```

Пример описания объектов тестового окружения см. в -- TODOC: ссылка на простой пример --

### Зарезервированные имена объектов

Следующие имена объектов НЕ ДОЛЖНЫ быть использованы в описании тестового окружения:
`all`, `any`, `others`, `none`

### Плоский и иерархический стиль описания

Возможно использование двух стилей описания иерархии - "плоского" и иерархического.

Плоский стиль подходит когда описание небольшое или не хочется усложнять восприятие большими отступами в тексте, 
а так же в случаях, когда требуется через параметр указывать объект-родитель (для подробностей  см. раздел 
'Экстарполяция значений в описании тестового окружения').

В любом случае можно сочетать оба метода - для тесносвязанных структур использовать иерархический стиль, а "верхушки"
 этих структур описывать в "плоском" стиле

## Расширенное описание

### Секция 'generics'

Эта секция позволяет параметризовать само тестовое окружение и в последствии при запуске теста указывать его параметры
 из командной строки
 
#### Формат описания
```yaml
      generics: # Содержит структуру с перечнем параметров и их значениями по умолчанию
        # Имя поля - имя параметра, значение поля - значение параметра по умолчанию
        # Допустимые типы параметров: string, int, float, list, dict
        <generic_1_name>: <generic_1_default_value>
        <generic_2_name>: <generic_2_default_value>
        ...
        # Типы list и dict при подстановке преобразуются в строковое представление
        # Для перевода их к нужному типу используйте $l{${generic_name}} и $d{${generic_name}} соответственно
        # Для подробностей см. раздел 'Экстраполяция значений в описании тестового окружения'
```

Имя параметра не должно начинаться с `_` и заканчиваться на `_`.

#### Установка значений параметров в командной строке
При запуске проверки с помощью скрипта `run` значения требуемых параметров тестового окружения указыаются следующим образом:
`  -g=<generic_1_name>:<generic_1_value> -g=<generic_2_name>:<generic_2_value> ...`\
Для параметров, которые должны быть типа `list` или `dict` в качестве значения передаётся выражение
`$e{<строковое представление списка или словаря в языке Python>}`
  
Использование параметров тестового окружения описано как часть следующего раздела

### Экстраполяция значений

При указании значений в описании тестового окружения есть возможность указывать не конкретное значение, а ссылаться
на значение другого параметра в описании этого же тестового окружения а так же использовать выражения Python.

К примеру:
```yaml
condition: "${generic_name}" # В качестве значения для параметра condition будет использовано значение параметра
                             # тестового окружения с именем 'generic_name' (д.б. описан в секции generics тестового окружения)
```

#### Формат описания:

Экстраполяция осуществляется только для строковых значений. Значения, соответствующие регулярному выражению `\$\w?{.+?}`
(инмеуемые далее как 'экстраполируемые выражения') будт замещаться в соответствии с приведёнными ниже правилами.

#### Правила экстраполяции

Выражения подстановки:
* `${<generic_name>}` и `$generics.{<generic_name>}` - используется для подстановки значения параметра тестового 
окружения с указанным именем `generic_name`
* `${alias.<alias_name>}` - используется для подстановки значения псевдонима с указанным именем `alias_name`
* `${<entity_name>.<field_name>}` - используется для подстановки значения параметра с именем `field_name` из объекта с 
именем `entity_name`
* `$e{<expression>}` - используется для подстановки результата выражения Python, указанного внутри фигурных скобок. 
В том числе используется для приведения строковых значений к другим типам Python, которые не поддержаны выражениями ниже

Выражения приведения типов:
* `$b{<value>}` - приведение содержимого фигурных скобок к типу `bool`. Строковые значения 'True' и 'False' трактуются 
соответственно как True и False, для других значений используются правила приведения типов Python
* `$i{<value>}` - приведение содержимого фигурных скобок к типу `int`. Используются правила приведения типов Python
* `$f{<value>}` - приведение содержимого фигурных скобок к типу `float`. Используются правила приведения типов Python
* `$s{<value>}` - приведение содержимого фигурных скобок к типу `string`. Используются правила приведения типов Python
* `$l{<value>}` - -- TODO: -- приведение содержимого фигурных скобок к типу `list`. Значение должно быть строковым представением 
списка в соответстии с правилами Python
* `$d{<value>}` - -- TODO: -- приведение содержимого фигурных скобок к типу `dict`. Значение должно быть строковым представением 
словаря в соответстии с правилами Python

_*Примечание:* Угловые скобки использованы для обозначения подставляемого значения в описании правила, и не требуеют реальной 
подстановки их в тексте_

-- TODO: `$x{<file_path>.<value hierarchical path like a/b/c>}` для включения значения из внешнего YAML/JSON файла? --

#### Приведение типов

При подстановке значения если экстраполируемое выражение не является полным значением строки или если 
тип подставляемого значения для выржений, кроме выражений приведения типов, не bool, int, float, то будет подставлено 
его текстовое представление в соответствии с правилами Python

Для приведения итогового значения к нужному типу завершающим выражением (таким, которое начинается в начале строки и 
закнчивается в её конце) следует испольлзовать выражения приведения к типу или подстановки выражения Python

При использовании `$e{<expression>}` нельзя проконтролировать, что результирующее значение окажется нужного типа

#### Порядок экстраполяции выражений:

Допускается иметь несколько экстраполируемых выражений в одной строке, в т.ч. вложенных друг в друга.\
Кроме этого допускается что после экстарполяции одного из них сформируется новое экстраполируемого выражение,
например `${${generic_name_1}.${generic_name_2}}` - после экстраполяции `${generic_name_1}` и `${generic_name_2}` может 
сформироваться новое экстраполируемое выражение вида `${<entity_name>.<field_name>}`.
При этом не обхоидмо избегать циклических ссылок. При наличии циклических ссылок выполнение проверки будет 
прервано.

Значения параметров тестового окружения (секция `generics`) так же могут экстраполироваться, но только используя 
значения других параметров тестового окружения, выражения Python и приведения типов, без использования параметров других
объектов и секций.

В первую очередь осуществляется экстраполяция значений параметров тестового окружения
После этого осуществляется экстраполяция всех остальных параметров

При экстраполяции каждого значения используется следующий принцип:
1. Пока возможна подстановка значений параметров тестового окружения или других объектов и секций, она осуществляется
2. Выполняется экстраполяция выражения Python
3. Если появляется возможность подстановки параметров тестового окружения или других объектов и секций, повторяются 
действия начиная с п.1
4. Если есть возможность эктраполяции выражения Python, повторяются действия начиная с п.2
5. Производится приведение типа, если такое имеется

#### Примеры экстраполируемых значений

Строка со значением `${mock}` - будет заменена на значение параметра тестового окружения с именем `mock`
Если тип параметра int, то в итоге экстраполяции данной строки будет значение с типом int и т.д.\

В строке  `is ${mock}` - будет произведена заменена её части `${mock}`на значение параметра тестового окружения с именем
 `mock`, при этом будет подставлено его строковое представление.

Строка со значением `$e{${mock} == 1}` - будет заменена на `True` типа `bool`, если значение параметра mock это 
целое число со значением `1`, число с плавающей запятой и значением `1.0`, а так же строка со значениями `1`, ` 1`,
 ` 1. `, `   1.0000   ` и т.д. (пробелы вокруг значения, знак запятой (`.`) а так же 0 после запятой), 
 в противном случае она будет заменена на `False` типа `bool`

### Секция 'alias'

Содержит список псведонимов, которые могут быть использовны для подставноки при экстраполяции значений

Эта секция позволяет описывать общие экстраполируеме выражения и константы для того, чтобы ссылаться на них в других 
частях описания

В псевдониме в т.ч. может быть экстраполируемое выражение, использующее другой псведоним, но необхоидмо избегать 
циклических ссылок. При наличии циклических ссылок выполнение проверки будет прервано.

В некотором смысле эта секция подобна секции `generics`, но значения её параметров нельзя задать в командной строке

#### Формат описания
```yaml
      alias: # Содержит структуру с перечнем псевдонимов и их значениями
        # Имя поля - имя параметра, значение поля - значение параметра по умолчанию
        # Допустимые типы параметров: string, int, float, list, dict
        <alias_1_name>: <alias_1_default_value>
        <alias_2_name>: <alias_2_default_value>
```

Имя псевдонима не должно начинаться с `_` и заканчиваться на `_`.


### Секция 'include'

-- TODO: требуется проработка и реализация --

Блок данной секции повзоляет включить на уровне текста без какого либо анализа содержимое другого файла YAML. 
При велючении текста будет учтён текущий уровень отступов.

В частности с помощью этой секции можно исключать конфиденциальную информацию из файлов описания тестовых окружений.

#### Формат описания

##### Включене в иерархию описания

```yaml
      include: # Содержит путь к описанию включаемого текста и параметры его включения        
        # Путь может быть абсолютным, относительным, в формате URI. В качестве разделителя в пути используется символ `/`
        path: <path_to_text>
        description: ""             # Опциональное поле для подробного описания включаемого кода в свободной форме
        options:                    # Опции доступа к файлу, зависит от типа URI
          # Ниже приведены предполагаемые опции доступа
          auth_name: <auth_name>    # Имя для аутентификции при доступе через URI
          auth_key: <auth_key>      # Ключ для аутентификции при доступе через URI
        condition: <condition>      # Условие включения (аналогично применению в описании объектов тестового окружения)
        name: <parent_field_name>   # Если указано, то текст будет включен в качестве значения для поля с указанным именем 
                                    # к секции YAML внутри которой находится секция 'include'. 
                                    # К примеру таким образом можно задать пароль без включения его в описание 
                                    # тестового окружения, глобальный параметр и т.п.
```

Содержимым секции `include` так же может быть список приведённых выше стркутур

### Секция 'import'

-- TODO: требуется проработка (м.б. скользкие моменты, один из них упомянут далее) и реализация --

Секция относится к расширению описания иерархии объектов тестового окружения.

Блок данной секции позволяет включить тестовое окружение, описанное в другом файле в качестве части данного тестового 
окружения.

#### Формат описания
```yaml
      import: # Содержит путь к описанию включаемого тестовое окружения и параметры его включения
        # Путь может быть абсолютным, относительным, в формате URI. В качестве разделителя в пути используется символ `/`
        path: <path_to_test_env_description>
        description: ""           # Опциональное поле для подробного описания включаемого кода в свободной форме
        options:                  # Опции доступа к файлу, зависит от типа URI
          # Ниже приведены предполагаемые опции доступа
          auth_name: <auth_name>  # Имя для аутентификции при доступе через URI
          auth_key: <auth_key>    # Ключ для аутентификции при доступе через URI
        name: <env_name>          # Имя включаемого тестового окружения из файла описания
        
        # Точка включения
        platform: <root_entity_name>  # Задаёт родительский объект для включаемого тестового окружения в том случае,
                                      # если секция import находится в верху иерархии объектов
        
        # Параметры включаемого тестового окружения
        generics:
          <generic_1_name>: <generic_1_value>  # Ключ - имя параметра включаемого тестового окружения
          <generic_2_name>: <generic_2_value>  # Значение - устанавливаемое значение соответствующего параметра
        ...
        # Параметры альтерации имён объектов
        name_prefix: <name_prefix_value>  # Постоянный префикс, приставляемый к имени объекта тестового окружения
        name_suffix: <name_suffix_value>  # Постоянный суффикс, приставляемый к имени объекта тестового окружения
        
        channels:                     # Список каналов сообщений, на которые должны быть подписаны все включаемые объекты
          - "<channel_1_name>"
          - "<channel_2_name>"

        wait:                         # Список имён объектов, трубемых для работы включаемых.
          - "entity_1_name"
          - "entity_2_name"
        
        # Параметры исключения объектов из импортируемого тестового окружения
        exclude:
          platform: # Исключение объектов по типу
            - "sequencer"
          name:     # Исключение объектов по имени. NOTE: Вместо имени м.б. использованы и другие поля
            - "$e{re.search('sequencer')}"
                
        # Условие включения (аналогично применению в описании объекта тестового окружения)
        condition: <condition>
```

Содержимым секции `import` так же может быть список приведённых выше стркутур

#### Принцип действия

Создаёт иерархию объектов указанного тестового окружения и включает её в данное тестовое окружение

Для исключения пересечения имён объектов, к именам объектов включаемого тестового окружения можно приставлять префксы и 
суффииксы.\
-- есть проблема - обращение по имени из объекта внутри включенного тестового окружения к другому объекту из него же
может попасть "мимо" если будут использованы суффиксы/префиксы TODO: нужно прораотать решение этого вопроса --

Если секция `import` расположена внутри объекта (в его секции platforms), то этот объект будет родительским для
 включаемой иерархии, иначе (если секция `import` находится в верху иерархии объеков тестового окружения), то если
 указан параметр platform и его значение не пустая строка и не None, то родителем для включаемой иерархии будет 
 объект с указанным в этом параметре именем, в противном случае включаемая иерархия будет подключена к корню тестового 
 окружения

### Секция 'generate'

Секция относится к расширению описания иерархии объектов тестового окружения

Данная секция позволяет сгенерировать объекты на основании описания итератора и шаблона описания иерархии объектов 

#### Формат описания
```yaml
      generate: # Содержит структуру с перечнем псевдонимов и их значениями
        description: ""                           # Опциональное поле для подробного описания в свободной форме
        iterator: "<Python iterable expression>"  # Выражение Python, возвращающее итерируемый объект (список, генератор range и т.п.)
        iterator_name: <iterator_name_value>      # Имя итератора, строковое значение
        condition: <condition>                    # Условие использования генератора (аналогично применению в описании объекта тестового окружения)
        # Опциональные параметры альтерации имён генерируемых объектов
        name_prefix: <name_prefix_value>          # Постоянный префикс, приставляемый к имени объектов из шаблона  -- TODO: --
        name_suffix: <name_suffix_value>          # Постоянный суффикс, приставляемый к имени объектов из шаблона  -- TODO: --
        platforms: # Шаблон описания иерархии объектов. Формат содержимого соответствует формату описания иерархии объектов тестового окружения
          <entity_type_A>:  # Тип описываемого объекта
            # Строка с именем объекта должна содердать выражение ${<iterator_name>}, которое будет заменяться 
            # значением итератора чтобы имена генерируемых объектов отличались
            # Это можно задавать с помощью параметров name_prefix и name_suffix (в них должно содержаться выражение ${<iterator_name_value>})
            # Или путём вставки этого выражения явным образом в имена объектов в шаблоне (пример ниже)
            - name: "<entity_1_name_prefix>${<iterator_name_value>}<entity_1_name_suffix>"
              # Для примера приведено, что значение итератора может быть подставлено в другие параметры объектов, не только имя 
              condition: "$e{${'<iterator_name_value>'=='x1'}" 
            ...            
            - name: "<entity_2_name_prefix>${<iterator_name>}<entity_2_name_suffix>"
            ...
```

#### Принцип действия
Для каждого значения итератора формируется набор объектов в соовтетствии с указанным шаблоном.
В строковых значениях параметров объектов выражение `${<iterator_name_value>}`, где `<iterator_name_value>` это значение
параметра `iterator_name`, будет заменено на строковое представление значения итератора текущей итерации 
-- TODOC: убедиться что так  --.

Родителем для объектов "верхушки" иерархии в шаблоне будет родительский объект секции generate, если такой имеется, 
иначе будет назначена в соответствии со значением параметра `platform` этих объектов, для оставльных объектов
родитель будет назначаться по стандатным правилам -- TODOC: убедиться что так --

#### Содержимое шаблона описания иерархии

В шаблоне описания иерархии м.б. как описания объектов, так и секции `group`, `innclude`, `import` а так же `generate`.

ВАЖНО чтобы значение итератора подставлялось ВО ВСЕ имена генерируемых объектов, т.е.
`${<iterator_name_value>}` должен быть в именах объектов, в именах объектов в шаблоне вложенной секции `generate`,
в параметре префикса или суффикса имени секции `import`.

Для упрощения этой задачи можно использовать параметры `name_prefix` или `name_suffix` и включить в них 
`${<iterator_name_value>}`.

Если в секции будет вложенна другая секция `generate` или `group`, то суффиксы и префикмы будут добавляться в следующем
порядке:\
`<перфикс уровня 1><перфикс уровня 2>...<значение имени из параметра объекта><суффикс уровня 1><суффикс уровня 2>...`

### Секция 'group'

-- TODO: требуется реализовать --

Данная секция позволяет сгруппировать несколько объектов для того, чтобы задать им общие свойства.

Может быть полезной в сочетании с секцией generate, а так же для включения/отключения группы объектов из тестового 
окружения.

#### Формат описания
```yaml
      group: # Содержит описания группируемых объектов и правила применения общих параметров
        description: ""               # Опциональное поле для подробного описания в свободной форме
        condition: <condition>        # Условие включения всей группы (аналогично применению в описании объектов тестового окружения)

        # Общие параметры объектов в группе. Задают значение параметров по умолчанию 
        # Т.е. будут действовать, если такие же параметры не будут указаны явно в описании объекта
        generics:
          <generic_1_name>: <generic_1_value>  # Ключ - имя общего параметра объектов
          <generic_2_name>: <generic_2_value>  # Значение - устанавливаемое значение соответствующего параметра
          
        # Префиксы для общих параметров объектов в группе. Добавляются к значению указанного параметра объекта
        # Будут добавлены как для значений по умолчанию, так и для указаннных в объектах явным образом
        generics_prefixes:
          <generic_1_name>: <generic_1_prefix_value>  # Ключ - имя общего параметра объектов
          <generic_2_name>: <generic_2_prefix_value>  # Значение - префикс, добавлямеый к значению соответствующего параметра

        # Суффиксы для общих параметров объектов в группе. Добавляются к значению указанного параметра объекта
        # Будут добавлены как для значений по умолчанию, так и для указаннных в объектах явным образом
        generics_suffixes:
          <generic_1_name>: <generic_1_suffix_value>  # Ключ - имя общего параметра объектов
          <generic_2_name>: <generic_2_suffix_value>  # Значение - префикс, добавлямеый к значению соответствующего параметра
        
        platforms: # Содержит описание иерархии объектов в группе, формат аналогичен описанию иерархии объектов тестового окружения
```

#### Порядок применения префиксов и суффиксов при вложенности

Если в секции будет вложенна другая секция `group` или `generate`, то суффиксы и префикмы будутт добавляться в следующем порядке:\
`<перфикс уровня 1><перфикс уровня 2>...<значение имени из параметра объекта><суффикс уровня 1><суффикс уровня 2>...`

### Секция 'platforms'

-- TODO: --

Секция зарезервирована для явного отделения описания иерархии объектов от параметров тестового окружения

### Секция 'extension'

-- TODO: --

Секция зарезервирована для расширения правил описания без нарушения обратной совместимости. Будет использована
при бэкпортировании новых возможностей в старые версии

### Секция 'model'

-- TODO: --

Секция зарезервирована для описания абстрактной модели, которую реализует описанная иерархия объектов тестового окружения
или её часть. Предполагаемое использование:
* наложение ограничений при формальной верификации чтобы не формировать заведомо некорректные аргументы
* выявлять исключительные ситуации и проверять реакцию на них
* использовать в качестве эталона при контроле значений

